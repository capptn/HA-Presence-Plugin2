<!DOCTYPE html>
<html>
  <head>
    <title>Anwesenheitssimulation</title>
  </head>
  <body>
    <h2>Anwesenheitssimulation</h2>

    <label>Entitäten auswählen:</label><br />
    <select id="entities" multiple size="10"></select>

    <script>
      async function loadEntities() {
        fetch("api/entities")
          .then((r) => r.json())
          .then((entities) => {
            if (!Array.isArray(entities)) {
              console.error("Ungültige Entity-Liste:", entities);
              return;
            }

            const sel = document.getElementById("entities");
            sel.innerHTML = "";

            entities.forEach((e) => {
              const opt = document.createElement("option");
              opt.value = e.id;
              opt.textContent = e.name;
              sel.appendChild(opt);
            });
          })
          .catch((err) => {
            console.error("Entity Load Error:", err);
          });
      }
      loadEntities();
    </script>
  </body>
</html>
